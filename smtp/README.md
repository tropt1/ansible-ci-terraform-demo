# ๐ง ะะฐะดะฐะฝะธะตโฏ3: ะัะฟัะฐะฒะบะฐ Eโmail ัะตัะตะท SMTP ะฒ Bash โ๏ธ

## ๐ ะะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ  
ะกะบัะธะฟั `send_mail.sh` ะพัะฟัะฐะฒะปัะตั ะฟะธััะผะฐ ัะตัะตะท SMTP ั ะฟะพะผะพััั `curl` (ะธะปะธ ะฐะปััะตัะฝะฐัะธะฒะฝะพ swaks), ะฟะพะทะฒะพะปัั ะณะธะฑะบะพ ะทะฐะดะฐะฒะฐัั:  
- ๐ง ะะฐัะฐะผะตััั SMTPโัะตัะฒะตัะฐ (ัะพัั, ะฟะพัั)  
- ๐ ะฃัััะฝัะต ะดะฐะฝะฝัะต (ะปะพะณะธะฝ, ะฟะฐัะพะปั ะธะปะธ AppโPassword)  
- ๐จ ะะฐะณะพะปะพะฒะบะธ ะฟะธััะผะฐ (From, To, Subject)  
- ๐ ะขะตะปะพ ะฟะธััะผะฐ (ัััะพะบะฐ ะธะปะธ ัะฐะนะป)  
- ๐ก TLS/STARTTLS ะดะปั ะฑะตะทะพะฟะฐัะฝะพะน ะฟะตัะตะดะฐัะธ  

## ๐ ะขะตัะฝะพะปะพะณะธะธ ะธ ะธะฝััััะผะตะฝัั  
- `Bash` โ ัะบัะธะฟัะพะฒัะน ัะทัะบ ะพะฑะพะปะพัะบะธ ๐  
- `curl` ั ะฟะพะดะดะตัะถะบะพะน SMTP/SMTPS ๐  
- `swaks` (Swiss Army Knife for SMTP) โ ะพะฟัะธะพะฝะฐะปัะฝะพ ๐ช  
- `OpenSSL` โ ะดะปั ะณะตะฝะตัะฐัะธะธ Appโะฟะฐัะพะปั (Gmail) ๐  

## ๐ ะกัััะบัััะฐ ัะตะฟะพะทะธัะพัะธั  
```
assignment-3-send-mail/
โโโ send_mail.sh # ะัะฝะพะฒะฝะพะน Bashโัะบัะธะฟั
โโโ example_body.txt # ะัะธะผะตั ัะฐะนะปะฐ ั ัะตะปะพะผ ะฟะธััะผะฐ
โโโ README.md # ะขะตะบััะฐั ะดะพะบัะผะตะฝัะฐัะธั
```

## โ๏ธ ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั  
ะฃััะฐะฝะพะฒะธัะต ะฝะตะพะฑัะพะดะธะผัะต ััะธะปะธัั ะธ ะทะฐะดะฐะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:
```bash
chmod +x send_mail.sh

# ะะฐัััะพะนะบะฐ SMTP
export SMTP_SERVER="smtp.gmail.com"      # ๐ฅ SMTPโัะตัะฒะตั
export SMTP_PORT=587                     # ๐ ะะพัั (STARTTLS: 587)
export SMTP_USER="you@gmail.com"         # ๐ค ะะพะณะธะฝ (eโmail)
export SMTP_PASS="your_app_password"     # ๐ ะะฐัะพะปั ะธะปะธ AppโPassword

# ะะฐัะฐะผะตััั ะฟะธััะผะฐ
export MAIL_FROM="you@gmail.com"         # ๐ฌ ะั ะบะพะณะพ
export MAIL_TO="friend@example.com"      # ๐ฅ ะะพะผั
export MAIL_SUBJECT="ะขะตััะพะฒะพะต ะฟะธััะผะพ"    # ๐ท ะขะตะผะฐ
# ะขะตะปะพ ะฟะธััะผะฐ: ะปะธะฑะพ ะฟะตัะตะผะตะฝะฝะฐั, ะปะธะฑะพ ัะฐะนะป
export MAIL_BODY="ะัะธะฒะตั! ะญัะพ ัะตััะพะฒะพะต ะฟะธััะผะพ."
# ะธะปะธ
export MAIL_BODY_FILE="example_body.txt"
```

## ๐ ะะฐะฟััะบ ัะบัะธะฟัะฐ

```bash
./send_mail.sh
```

ะะพัะปะต ััะฟะตัะฝะพะณะพ ะฒัะฟะพะปะฝะตะฝะธั ัะฒะธะดะธัะต:

```css
Email sent to friend@example.com โ
```

## ๐ ะะปััะตัะฝะฐัะธะฒะฐ ัโฏSwaks
ะัะปะธ `curl` ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั SMTP (ะพัะธะฑะบะฐ โProtocol smtp not supportedโ), ัััะฐะฝะพะฒะธัะต `swaks` ะธ ะฒัะฟะพะปะฝะธัะต:

```bash
swaks \
  --to friend@example.com \
  --from you@gmail.com \
  --server smtp.gmail.com \
  --port 587 \
  --auth LOGIN \
  --auth-user you@gmail.com \
  --auth-password your_app_password \
  --tls \
  --header "Subject: ะขะตัั ัะตัะตะท swaks" \
  --body "ะัะธะฒะตั ะธะท Swaks! ๐"
```

## โ๏ธ ะะพะทะผะพะถะฝัะต ะพัะธะฑะบะธ ะธ ัะตัะตะฝะธั
### ๐ Protocol โsmtpโ not supported
- `libcurl` ัะพะฑัะฐะฝ ะฑะตะท SMTP.

- ะะตัะตะฝะธะต: ัััะฐะฝะพะฒะธัั ะฟะพะปะฝัะน ะฟะฐะบะตั libcurl ะธะปะธ ะฟะตัะตะบะพะผะฟะธะปะธัะพะฒะฐัั ั `--enable-smtp`.

### โ URL rejected: No host part in the URL
- ะะตะฟัะฐะฒะธะปัะฝัะน ัะพัะผะฐั `--url`.

- ะฃะฑะตะดะธัะตัั, ััะพ ัะบะฐะทะฐะฝ `smtp://<host>:<port>`.

### ๐ Authentication failed
- ะัะพะฒะตัััะต SMTP_USER/SMTP_PASS.

- ะะปั Gmail ะฒะบะปััะธัะต AppโPassword ะธ ะดะฒัััะฐะบัะพัะฝัั ะฐััะตะฝัะธัะธะบะฐัะธั.

### โฑ๏ธ Connection timed out
- ะกะตัะฒะตั ะธะปะธ ะฟะพัั ะฝะตะดะพัััะฟะฝั (ัะฐะตัะฒะพะป, ัะตัั).

### ๐ Permission denied on temp file
- ะฃะฑะตะดะธัะตัั, ััะพ ัะบัะธะฟั ะธะผะตะตั ะฟัะฐะฒะพ ะฟะธัะฐัั ะฒ `/tmp`.

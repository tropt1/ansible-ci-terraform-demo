# üìò Ansible: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

---

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç Ansible playbook, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

- –í–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ Nginx —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –°–µ—Ä–≤–µ—Ä–∞ OpenSSH –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
nginx_ansible/
‚îú‚îÄ‚îÄ ansible.cfg
‚îú‚îÄ‚îÄ inventory
‚îú‚îÄ‚îÄ playbook.yml
‚îú‚îÄ‚îÄ roles/
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/main.yml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/nginx.conf.j2
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vars/main.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers/main.yml
‚îÇ   ‚îî‚îÄ‚îÄ ssh/
‚îÇ       ‚îú‚îÄ‚îÄ tasks/main.yml
‚îÇ       ‚îî‚îÄ‚îÄ files/id_rsa.pub
```

## üß∞ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Ubuntu (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Ansible
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤

## ‚öôÔ∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ inventory —É–∫–∞–∑–∞–Ω IP –∏–ª–∏ localhost, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```ini
[web]
localhost:2222 ansible_user=<—É–∫–∞–∑–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —é–∑–µ—Ä–∞>
```

## üöÄ –ó–∞–ø—É—Å–∫ playbook
```bash
ansible-playbook playbook.yml --ask-pass --ask-become-pass
```

> –í –∑–∞–¥–∞–Ω–∏–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é task –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –µ–º—É –ø–∞—Ä–æ–ª—è. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±—É–¥–µ—Ç –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ playbook
 
## üìÑ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç playbook:

### –†–æ–ª—å nginx:

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç nginx
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ /etc/nginx/nginx.conf –∏–∑ —à–∞–±–ª–æ–Ω–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–∞ 80

### –†–æ–ª—å ssh:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç openssh-server
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏ –≤–∫–ª—é—á–∞–µ—Ç ssh
- –°–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è devops
- –î–æ–±–∞–≤–ª—è–µ—Ç SSH-–∫–ª—é—á

## ‚úÖ –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
```bash
PLAY [Configure Nginx Web Server] *********************************************

TASK [nginx : Install nginx] **************************************************
changed: [localhost]

TASK [nginx : Deploy nginx configuration] *************************************
changed: [localhost]

...

TASK [nginx : Check if nginx is listening on port 80] *************************
ok: [localhost]

PLAY RECAP ********************************************************************
localhost                  : ok=6    changed=4    unreachable=0    failed=0
```
